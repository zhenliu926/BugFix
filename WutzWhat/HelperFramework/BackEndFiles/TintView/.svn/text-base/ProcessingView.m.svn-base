//
//  tintView.m
//  McTrackMobile
//
//  Created by Yunas Qazi on 12/31/11.
//  Copyright (c) 2011 Style360. All rights reserved.
//

#import "ProcessingView.h"
#import <QuartzCore/QuartzCore.h>

static ProcessingView *processingView;

@implementation ProcessingView


-(void) setBasicConstants
{
	
	CGRect frame= CGRectMake(85, 155, 150, 150);
	
	UIActivityIndicatorView * activitySpinner = [[UIActivityIndicatorView alloc] initWithActivityIndicatorStyle:UIActivityIndicatorViewStyleWhiteLarge];
	activitySpinner.hidden = NO;
	activitySpinner.center = CGPointMake(frame.size.width/2, frame.size.height/2);
	activitySpinner.hidesWhenStopped = YES;
	[activitySpinner setBackgroundColor:[UIColor clearColor]];
	
	tintView = [[UIView alloc]initWithFrame:frame];
	tintView.backgroundColor = [UIColor blackColor];
	tintView.alpha = 0.75;
	tintView.clipsToBounds =  YES;
	
	UILabel *tintLabel = [[UILabel alloc]initWithFrame:CGRectMake(0,100, frame.size.width, 50)];
	//tintLabel.center = CGPointMake(TintView.center.x,TintView.center.y);
	tintLabel.textAlignment = UITextAlignmentCenter;
	tintLabel.backgroundColor = [UIColor clearColor];
	tintLabel.textColor = [UIColor whiteColor];
	tintLabel.text = @"Processing";
	
	[tintView.layer setCornerRadius:15.0f];
	
//	CGRect frame= CGRectMake(85, 155, 150, 150);
//	
//	
//	UIActivityIndicatorView * activitySpinner = [[UIActivityIndicatorView alloc] initWithActivityIndicatorStyle:UIActivityIndicatorViewStyleWhiteLarge];
//	activitySpinner.hidden = NO;
//	activitySpinner.center = CGPointMake(frame.size.width/2, frame.size.height/2);
//	activitySpinner.hidesWhenStopped = YES;
//	[activitySpinner setBackgroundColor:[UIColor clearColor]];
//	
//	tintView = [[UIView alloc]initWithFrame:frame];
//	tintView.backgroundColor = [UIColor blackColor];
//	tintView.alpha = 0.75;
//	tintView.clipsToBounds =  YES;
//	
//	UILabel *tintLabel = [[UILabel alloc]initWithFrame:CGRectMake(0,100, frame.size.width, 50)];
//	tintLabel.textAlignment = UITextAlignmentCenter;
//	tintLabel.backgroundColor = [UIColor clearColor];
//	tintLabel.textColor = [UIColor whiteColor];
//	tintLabel.text = @"Processing";
//	
//	[tintView.layer setCornerRadius:15.0f];
//	[tintView.layer setBorderWidth:1.5f];
//	[tintView.layer setShadowOpacity:0.8];
//	[tintView.layer setShadowRadius:1.0];
//	[tintView.layer setShadowOffset:CGSizeMake(2.0, 2.0)];
	
	[tintView addSubview:activitySpinner];
	[tintView addSubview:tintLabel];
	[activitySpinner startAnimating];
	[tintLabel release]; // new addition
	
}


+(ProcessingView *) instance 
{
	if (!processingView) {

		processingView = [[ProcessingView alloc]init];
		[processingView setBasicConstants];
	}
	return processingView;
}

-(void) showTintView{
	UIWindow *window = 	[[[UIApplication sharedApplication] delegate] window];
	[[[[UIApplication sharedApplication] delegate] window] addSubview:tintView];
	[tintView setCenter:CGPointMake(window.center.x, window.center.y)];
}

-(void) hideTintView{
	[tintView removeFromSuperview];
}



@end
